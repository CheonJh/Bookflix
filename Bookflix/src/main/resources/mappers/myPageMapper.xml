<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 직접 쿼리문을 입력 하는 곳 -->
<mapper namespace="com.green.mapper.myPageMapper">
<!-- 읽은 책 목록 -->
<select id="list1" resultType="com.green.myPage.domain.myPageDTO">
  select r.hadread_num, e.e_book_title, r.HADREAD_DATE
from HADREAD as r 
join E_BOOK as e on r.E_BOOK_NUM = e.E_BOOK_NUM
join MEMBER as m on r.MEMBER_NUM = m.MEMBER_NUM
where m.MEMBER_NUM = 2;
</select>

<!-- 찜한 도서 목록 -->
<select id="list2" resultType="com.green.myPage.domain.myPageDTO">
  select f.FAVORITE_NUM, e.e_book_title, f.FAVORITE_DATE
from FAVORITE as f 
join E_BOOK as e on f.E_BOOK_NUM = e.E_BOOK_NUM
join MEMBER as m on f.MEMBER_NUM = m.MEMBER_NUM
where m.MEMBER_NUM = 2;
</select>

<!-- 좋아요 한 도서 목록 -->
<select id="list3" resultType="com.green.myPage.domain.myPageDTO">
  select t.THUMBUP_NUM, e.e_book_title, t.THUMBUP_DATE
from THUMBUP as t 
join E_BOOK as e on t.E_BOOK_NUM = e.E_BOOK_NUM
join MEMBER as m on t.MEMBER_NUM = m.MEMBER_NUM
where m.MEMBER_NUM = 2;
</select>

<!-- 구독 잔여 일수 -->
<select id="date" resultType="int">
  select datediff(date_add(max(SUBSCRIBE_DATE), INTERVAL 1 MONTH),now()) as day 
from SUBSCRIBE where MEMBER_NUM = 2;
</select>

</mapper>